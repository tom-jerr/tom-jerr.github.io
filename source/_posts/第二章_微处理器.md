---
title: 微处理器
index_img: /img/assembly.png
categories:
- 汇编语言
tags:
- 汇编
- C&C++
comment: valine
math: true
---

# 前言

本文是汇编语言第二章内容总结
<!-- more -->

# 微处理器

## 8086/8088微处理器
*    特点

	> （CPU内部结构）采用并行流水线工作方式：将CPU分为两个功能部分并设置指令预取队列
	> （存储器寻址部分）对内存空间实行分段管理：将内存分为多个段并设置4个段地址寄存器
	> （工作模式）支持多处理器系统

### 8088CPU工作模式
1. 最小模式
	单处理器模式，一般CPU直接输出控制信号到总线
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/最小模式.png)
2. 最大模式
	多处理器模式，CPU+协处理器，控制信号多，需要通过总线控制器与总线相连接
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/最大模式.png)
工作模式的选择
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/工作模式选择.png)
***
### 主要引线（8088最小模式）
1. 地址线和数据线
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/marmdr.png)
2. 主要的控制和状态信号线
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/controlsignal.png)
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/controlsignal2.png)
3. 中断请求和响应信号
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/中断请求与响应.png)
***
### 8086和8088引线的差异
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/引线差异.png)
***

## 8086CPU内部结构
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/8086CPU.png)
### 执行单元（EU）
运算器（ALU）
8个通用寄存器
1个标志寄存器
EU部分的控制电路

![](https://github.com/tom-jerr/MyblogImg/raw/main/src/EU功能.png)
***
### 总线接口单元（BIU）
地址加法器
4个段寄存器
指令指针IP
总线控制逻辑

![](https://github.com/tom-jerr/MyblogImg/raw/main/src/BIU功能.png)
***
### 结论
**指令队列的存在使得RU和BIU两个部分可以并行工作**
提高了CPU的效率
降低了对存储器存取速度的要求
***

## 内部寄存器
有14个16位寄存器
	8个通用寄存器
	4个段寄存器
	2个控制寄存器
### 通用寄存器
1. 数据寄存器（AX、BX、CX、DX）：可以拆分为2个8位寄存器（AH、AL）
2. 地址指针寄存器（SP、BP）
3. 变址寄存器（SI、DI）

### 数据寄存器特有的固有用法
数据寄存器：
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/数据寄存器用法.png)
地址指针寄存器：
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/地址指针寄存器用法.png)
作为基址寄存器，BX表示所找的数据在数据段；BP则表示数据在堆栈段
变址寄存器：
	![](https://github.com/tom-jerr/MyblogImg/raw/main/src/变址寄存器用法.png)

### 控制寄存器——IP与FLAGS
IP：内容为下一条要执行的指令的偏移地址
FLAGS：存放运算结果的状态特征和控制CPU运行
6个状态标志位
	CF：进位标志位（最高位）
	PF（Parity Flag）：奇偶标志位（根据1的个数判断）
	AF（Auxiliary Carry Flag）：辅助进位标志位（最后4位有进位，AF=1）
	ZF：零标志位
	SF：运算结果最高位为1，SF=1
	OF：溢出标志位
3个控制标志位
	TF（Trap Flag）：陷阱标志位，也叫跟踪标志位。TF=1时，CPU处于单步执行指令的工作方式
	IF（Interrupt Enable Flag）：中断允许标志位。IF=1使CPU可以响应可屏蔽中断请求
	DF（Direction Flag）：方向标志位。在数据串操作时确定操作的方向。
### 段寄存器
用于存放相应逻辑段的段基地址
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/段寄存器.png)

***

## 存储器组织
物理地址：有20根地址线
	任何相邻字节单元构成一个字单元
	字单元地址为两个字节单元中较小地址字节单元的地址
	字数据存放规则是低8位放在较低地址字节单元，高8位放在较高地址字节单元。（**小端方式**）
逻辑地址：16位段基地址+16位段内地址（偏移地址）
	逻辑段的起始单元称为段首，段首的偏移地址=0
物理地址=段基地址×16+偏移地址

### 堆栈段
栈底是第一个存入数据的地址；
SP（栈顶指针）始终表示堆栈段首与栈顶之间的距离（字节数）
SP最大时，堆栈为空
SP=0时，堆栈全满
***

## 8088系统总线
总线：是一组导线和相关控制、驱动电路的集合，它是计算机系统各部件之间传输地址、数据和控制信息的通道
总线包括：
	1. 地址总线（AB）
	2. 数据总线（DB）
	3. 控制总线（CB）
### 总线时序
时序：CPU各个引脚信号在时间上的关系
总线周期：CPU完成一次访问内存（或I/O接口）操作所需要的时间；1个总线周期至少包括4个时钟周期

### IA-32微处理器的主要寄存器
通用寄存器
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/IA-32寄存器.png)

指令指针和标志寄存器
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/IA-32IP.png)

段寄存器和系统地址寄存器
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/IA-32段寄存器.png)

IA-32内部有4个32位控制寄存器：CR0、CR1、CR2、CR3
### IA-32工作模式
实地址方式：实模式（简称位16位模式）
保护虚地址工作模式：保护模式（又增加了虚拟8086方式）（简称为32位模式）

![](https://github.com/tom-jerr/MyblogImg/raw/main/src/线性地址-物理地址.png)

**平坦存储模式**
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/flat存储.png)

***

### IA-32e（AMD-64）
寄存器结构
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/amd64-registers.png)

工作模式
![](https://github.com/tom-jerr/MyblogImg/raw/main/src/amd64-work.png)







